---
import Layout from '../layouts/Layout.astro';
import DashboardContent from '../components/DashboardContent.jsx';
import Balatro from '../components/Balatro.jsx';

// Server-side auth check
const authHeader = Astro.request.headers.get('cookie');
const hasSession = authHeader?.includes('sb-');

// Note: For a more secure check, you would verify the session with Supabase on the server
// For now, we'll rely on client-side checks in the component
---

<Layout title="Admin Dashboard - Project Overlord" shouldPadHeader={true}>
  <div class="relative min-h-screen overflow-hidden">
    <!-- Background Effect -->
    <div class="fixed inset-0 w-full h-full bg-zinc-950 -z-10">
      <Balatro
        isRotate={true}
        mouseInteraction={true}
        pixelFilter={700}
        spinSpeed={1.5}
        client:load
      />
    </div>

    <!-- Overlay -->
    <div class="fixed inset-0 bg-gradient-to-b from-zinc-950/60 via-zinc-950/80 to-zinc-950 -z-10">
    </div>

    <!-- Dashboard Content -->
    <div class="relative z-10">
      <DashboardContent client:load />
    </div>
  </div>
</Layout>
